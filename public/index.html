<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Architect Skill Trails</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Manrope:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body class="tree-app">
  <header class="tree-header">
    <div class="brand">
      <div class="dot"></div>
      <div>
        <p class="eyebrow">Architect Skill Trails</p>
        <h1>THINKLAB SKILLTREE</h1>
      </div>
    </div>
    <div class="header-actions">
      <button class="pill" id="adminToggle">Login</button>
    </div>
  </header>

  <main id="mapView">
    <section class="tree-stage" id="treeStage">
      <div class="tree-toolbar">
        <div>
          <p class="eyebrow">Radial explorer</p>
          <p>Drag to explore the practice map. Tracks radiate from the center hub.</p>
        </div>
        <div class="legend-inline">
          <span class="legend-chip"><span class="legend-dot status-ready"></span>Ready</span>
          <span class="legend-chip"><span class="legend-dot status-in-review"></span>In review</span>
          <span class="legend-chip"><span class="legend-dot status-draft"></span>Draft</span>
        </div>
      </div>
      <div class="tree-viewport" id="treeViewport">
        <svg id="treeLines" role="presentation"></svg>
        <div id="treeNodes" aria-live="polite"></div>
      </div>

    </section>

    <section class="filters">
      <div class="filter-row">
        <div class="filter-group">
          <label class="hint">Search</label>
          <input type="search" id="searchInput" placeholder="Search tutorials, tags, or owners">
        </div>
        <div class="filter-group">
          <label class="hint">Status</label>
          <div class="chip-row" id="statusFilters">
            <button class="chip active" data-status="all">All</button>
            <button class="chip" data-status="ready">Ready</button>
            <button class="chip" data-status="in-review">In review</button>
            <button class="chip" data-status="draft">Draft</button>
          </div>
        </div>
        <div class="filter-group">
          <label class="hint">Tracks</label>
          <div class="chip-row" id="trackFilters"></div>
        </div>
      </div>
    </section>

    <section id="tracks" class="track-grid"></section>

  </main>

  <section id="backstageView" class="hidden">
    <header class="backstage-header">
      <div>
        <p class="eyebrow">Backstage</p>
        <h2>Editor for practice leads</h2>
        <p class="lede">Manage tutorials and tracks here.</p>
      </div>
      <button class="pill ghost" id="backToTree">Back to tree</button>
    </header>
    <section class="admin" id="adminPanel">
      <div class="admin-grid">
        <div class="panel">
          <div class="panel-head">
            <div>
              <p class="eyebrow">Tutorials</p>
              <h3>Create or update a module</h3>
            </div>
            <button class="pill ghost" id="resetModule">New module</button>
          </div>
          <form id="moduleForm" class="stack">
            <label>Pick an existing module</label>
            <select id="moduleSelect"></select>
            <label>Title</label>
            <input id="moduleTitle" required>
            <label>Track</label>
            <select id="moduleTrack" required></select>
            <label>Summary</label>
            <textarea id="moduleSummary" rows="3"></textarea>
            <div class="grid-2">
              <div>
                <label>Status</label>
                <select id="moduleStatus">
                  <option value="ready">Ready</option>
                  <option value="in-review">In review</option>
                  <option value="draft">Draft</option>
                </select>
              </div>
              <div>
                <label>Level</label>
                <input id="moduleLevel" placeholder="Core / Foundation / Advanced">
              </div>
            </div>
            <div class="grid-2">
              <div>
                <label>Duration</label>
                <input id="moduleDuration" placeholder="30m / self-paced">
              </div>
              <div>
                <label>Owner</label>
                <input id="moduleOwner" placeholder="Design Ops, Digital Practice...">
              </div>
            </div>
            <label>Tags (comma separated)</label>
            <input id="moduleTags" placeholder="BIM, QA, workshop">
            <label>Highlight</label>
            <textarea id="moduleHighlight" rows="2"></textarea>
            <div class="link-list">
              <div class="link-head">
                <span>Resources</span>
                <button class="pill ghost" type="button" id="addLink">Add link</button>
              </div>
              <div id="linkFields"></div>
            </div>
            <div class="panel-actions">
              <button class="pill" type="submit">Save module</button>
              <button class="pill danger" type="button" id="deleteModule">Delete</button>
            </div>
            <p class="hint" id="moduleMessage"></p>
          </form>
        </div>

        <div class="panel">
          <div class="panel-head">
            <div>
              <p class="eyebrow">Tracks</p>
              <h3>Add or adjust tracks</h3>
            </div>
          </div>
          <form id="trackForm" class="stack">
            <label>Title</label>
            <input id="trackTitle" required placeholder="Digital Practice">
            <label>Description</label>
            <textarea id="trackDescription" rows="3"></textarea>
            <div class="grid-2">
              <div>
                <label>Focus</label>
                <input id="trackFocus" placeholder="DD -> CD">
              </div>
              <div>
                <label>Lead</label>
                <input id="trackLead" placeholder="Technical Design">
              </div>
            </div>
            <label>Accent color</label>
            <input id="trackColor" type="color" value="#ff7a18">
            <div class="panel-actions">
              <button class="pill" type="submit">Add track</button>
            </div>
            <p class="hint" id="trackMessage"></p>
          </form>
        </div>
      </div>
    </section>
  </section>

  <section class="admin-login" id="adminLoginPage" aria-hidden="true">
    <div class="login-card">
      <button class="close-login" id="adminLoginClose" aria-label="Close admin login">&times;</button>
      <p class="eyebrow">Admin Access</p>
      <h2>Enter your studio token</h2>
      <p class="lede">Only approved practice leads can edit the trails.</p>
      <form id="adminLogin">
        <input id="tokenInput" type="password" placeholder="Enter ADMIN_TOKEN">
        <button class="pill" type="submit">Continue</button>
      </form>
      <p class="hint" id="tokenStatus"></p>
      <p class="hint">Token persists for this browser session only.</p>
    </div>
  </section>

  <footer class="footer">
    <div>
      <p class="eyebrow">Deploy</p>
      <p>GitHub Pages: serve the docs folder (includes data/trails.json). For editable mode, run npm start on a Node host and set ADMIN_TOKEN.</p>
    </div>
    <div>
      <p class="eyebrow">Usage</p>
      <p>Practice leads edit via the admin token; the rest of the team views the live trail.</p>
    </div>
  </footer>

  <script src="app.js"></script>
</body>
</html>

